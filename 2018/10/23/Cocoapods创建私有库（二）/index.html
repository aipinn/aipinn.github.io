<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="简体中文">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">






  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Cocopods,Docker,GitLab," />










<meta name="description" content="Cocoapods创建私有Specs(二) Pod， One Pod, over the course of time, will have many Specs. It includes details about where the source should be fetched from, what files to use, the build settings to apply, an">
<meta name="keywords" content="Cocopods,Docker,GitLab">
<meta property="og:type" content="article">
<meta property="og:title" content="Cocoapods创建私有Specs(一)">
<meta property="og:url" content="http://aipinn.com/2018/10/23/Cocoapods创建私有库（二）/index.html">
<meta property="og:site_name" content="Pinnの小站">
<meta property="og:description" content="Cocoapods创建私有Specs(二) Pod， One Pod, over the course of time, will have many Specs. It includes details about where the source should be fetched from, what files to use, the build settings to apply, an">
<meta property="og:locale" content="简体中文">
<meta property="og:updated_time" content="2018-11-29T14:35:30.497Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cocoapods创建私有Specs(一)">
<meta name="twitter:description" content="Cocoapods创建私有Specs(二) Pod， One Pod, over the course of time, will have many Specs. It includes details about where the source should be fetched from, what files to use, the build settings to apply, an">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":true,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://aipinn.com/2018/10/23/Cocoapods创建私有库（二）/"/>





  <title>Cocoapods创建私有Specs(一) | Pinnの小站</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d2b7d429530ebbc43227f63a61f87190";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="简体中文">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Pinnの小站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description">Pinn:如何证明你有自我意识</h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            Commonweal 404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://aipinn.com/2018/10/23/Cocoapods创建私有库（二）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Pinn">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avator.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pinnの小站">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">Cocoapods创建私有Specs(一)</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-10-23T20:20:34+08:00">
                2018-10-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Cocoapods/" itemprop="url" rel="index">
                    <span itemprop="name">Cocoapods</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/10/23/Cocoapods创建私有库（二）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/10/23/Cocoapods创建私有库（二）/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <h1 id="Cocoapods创建私有Specs-二"><a href="#Cocoapods创建私有Specs-二" class="headerlink" title="Cocoapods创建私有Specs(二)"></a>Cocoapods创建私有Specs(二)</h1><p> Pod， One Pod, over the course of time, will have many Specs. It includes details about where the source should be fetched from, what files to use, the build settings to apply, and other general metadata such as its name, version, and description. 我们平常使用的是Cocoapods官方维护的一个开源的Pod库，它本身是一个git管理的Ruby项目。我们可以自己创建一个公开Pod或私有Pod，在公司开发内部我们一般会维护一个私有的Pod项目，其中会包含内部使用的二方（与三方相对）项目。</p>
<h2 id="引用私有Spec（-git）"><a href="#引用私有Spec（-git）" class="headerlink" title="引用私有Spec（:git）"></a>引用私有Spec（:git）</h2><h5 id="1-名词解析"><a href="#1-名词解析" class="headerlink" title="1. 名词解析"></a>1. 名词解析</h5><ul>
<li>Podfile，</li>
<li>Podfile.lock，</li>
<li>repos， repository (仓库)的缩写。一个Pod项目在本地的clone，默认一般位于<code>~/.cocoapods/repos/</code>目录，内部存放多个Pod项目，master是Cocoapods官方维护的Pod在本地的Clone，第一次pod install时会从Github下载。</li>
<li>pod library， 支持cocoapods引用的开源（或私有）项目</li>
<li>project， 此处Xocde项目</li>
<li>Podspec或者Spec，是对一个pod库的版本描述。每一个支持pod的库都必须包含<code>.podsepc</code>文件</li>
<li>Specs，多个podspec的集合</li>
</ul>
<a id="more"></a>
<h5 id="2-创建一个支持cocoapods的pod-library项目"><a href="#2-创建一个支持cocoapods的pod-library项目" class="headerlink" title="2. 创建一个支持cocoapods的pod library项目"></a>2. 创建一个支持cocoapods的pod library项目</h5><ul>
<li>创建一个Xcode项目，并git初始化</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">emoji:MyLib penn$ ls</span><br><span class="line">MyLib		MyLib.xcodeproj	MyLibTests	MyLibUITests</span><br><span class="line">emoji:MyLib penn$ git init</span><br><span class="line">Initialized empty Git repository in /Users/penn/Desktop/MyLib/.git/</span><br><span class="line">emoji:MyLib penn$ git add .</span><br><span class="line">emoji:MyLib penn$ git commit -m "init"</span><br><span class="line">[master (root-commit) 12e3f57] init</span><br><span class="line"> 19 files changed, 1052 insertions(+)</span><br><span class="line"> create mode 100644 MyLib.xcodeproj/project.pbxproj</span><br><span class="line"> create mode 100644 MyLib.xcodeproj/project.xcworkspace/contents.xcworkspacedata</span><br><span class="line"> create mode 100644 MyLib.xcodeproj/project.xcworkspace/xcshareddata/IDEWorkspaceChecks.plist</span><br><span class="line"> create mode 100644 MyLib.xcodeproj/project.xcworkspace/xcuserdata/penn.xcuserdatad/UserInterfaceState.xcuserstate</span><br><span class="line"> create mode 100644 MyLib.xcodeproj/xcuserdata/penn.xcuserdatad/xcschemes/xcschememanagement.plist</span><br><span class="line"> create mode 100644 MyLib/AppDelegate.h</span><br><span class="line"> create mode 100644 MyLib/AppDelegate.m</span><br><span class="line"> create mode 100644 MyLib/Assets.xcassets/AppIcon.appiconset/Contents.json</span><br><span class="line"> create mode 100644 MyLib/Assets.xcassets/Contents.json</span><br><span class="line"> create mode 100644 MyLib/Base.lproj/LaunchScreen.storyboard</span><br><span class="line"> create mode 100644 MyLib/Base.lproj/Main.storyboard</span><br><span class="line"> create mode 100644 MyLib/Info.plist</span><br><span class="line"> create mode 100644 MyLib/ViewController.h</span><br><span class="line"> create mode 100644 MyLib/ViewController.m</span><br><span class="line"> create mode 100644 MyLib/main.m</span><br><span class="line"> create mode 100644 MyLibTests/Info.plist</span><br><span class="line"> create mode 100644 MyLibTests/MyLibTests.m</span><br><span class="line"> create mode 100644 MyLibUITests/Info.plist</span><br><span class="line"> create mode 100644 MyLibUITests/MyLibUITests.m</span><br></pre></td></tr></table></figure>
<ul>
<li>与gitlab上的项目关联</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">emoji:MyLib penn$ git remote add origin git@127.0.0.1:xxxxxx/mylib.git</span><br><span class="line">emoji:MyLib penn$ git pull --rebase origin master</span><br><span class="line">warning: no common commits</span><br><span class="line">remote: Enumerating objects: 9, done.</span><br><span class="line">remote: Counting objects: 100% (9/9), done.</span><br><span class="line">remote: Compressing objects: 100% (6/6), done.</span><br><span class="line">remote: Total 9 (delta 0), reused 0 (delta 0)</span><br><span class="line">Unpacking objects: 100% (9/9), done.</span><br><span class="line">From 127.0.0.1:xxxxxx/mylib</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line"> * [new branch]      master     -&gt; origin/master</span><br><span class="line">First, rewinding head to replay your work on top of it...</span><br><span class="line">Applying: init</span><br><span class="line">emoji:MyLib penn$ git push -u origin master</span><br><span class="line">Counting objects: 34, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (30/30), done.</span><br><span class="line">Writing objects: 100% (34/34), 13.13 KiB | 2.63 MiB/s, done.</span><br><span class="line">Total 34 (delta 3), reused 0 (delta 0)</span><br><span class="line">To 127.0.0.1:xxxxxx/mylib.git</span><br><span class="line">   f5b531d..20d4161  master -&gt; master</span><br><span class="line">Branch 'master' set up to track remote branch 'master' from 'origin'.</span><br><span class="line">emoji:MyLib penn$</span><br></pre></td></tr></table></figure>
<ul>
<li>为项目添加podspec文件<br><code>pod spec create mylib</code> </li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">emoji:MyLib penn$ pod spec create mylib</span><br><span class="line"></span><br><span class="line">Specification created at mylib.podspec</span><br></pre></td></tr></table></figure>
<ul>
<li>在项目中添加可以被他人引用的代码，eg: mylib/Open/Replace.h、Replace.m，并添加提交.</li>
</ul>
<p>修改mylib.podspec文件<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Pod::Spec.new <span class="keyword">do</span> <span class="params">|s|</span></span><br><span class="line"></span><br><span class="line">  s.name         = <span class="string">"mylib"</span></span><br><span class="line">  s.version      = <span class="string">"0.0.1"</span></span><br><span class="line">  s.summary      = <span class="string">"MyLib简介"</span></span><br><span class="line"></span><br><span class="line">  s.description  = <span class="string">&lt;&lt;-DESC</span></span><br><span class="line"><span class="string">    必填，。。。。。。。</span></span><br><span class="line"><span class="string">    * 随便写,支持Markdown</span></span><br><span class="line"><span class="string">    DESC</span></span><br><span class="line">  s.platform     = <span class="symbol">:ios</span></span><br><span class="line"></span><br><span class="line">  s.platform     = <span class="symbol">:ios</span>, <span class="string">"9.0"</span></span><br><span class="line"></span><br><span class="line">  s.homepage     = <span class="string">"http://127.0.0.1/xxxxxx/mylib.git"</span></span><br><span class="line"></span><br><span class="line">  s.license      = &#123; <span class="symbol">:type</span> =&gt; <span class="string">"MIT"</span>, <span class="symbol">:file</span> =&gt; <span class="string">"LICENSE"</span> &#125;</span><br><span class="line"></span><br><span class="line">  s.author             = &#123; <span class="string">"xxxxxx"</span> =&gt; <span class="string">"xxxxxx@gmail.com"</span> &#125;</span><br><span class="line"></span><br><span class="line">  s.source       = &#123; <span class="symbol">:git</span> =&gt; <span class="string">"http://127.0.0.1/xxxxxx/mylib.git"</span>&#125;</span><br><span class="line"> </span><br><span class="line">  s.source_files  = <span class="string">"mylib/Open/*.&#123;h,m&#125;"</span></span><br><span class="line"></span><br><span class="line">  s.requires_arc = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure></p>
<p>添加Replace类，并验证podspec文件的有效性<br>发现有警告，但没有错误。<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">emoji:MyLib penn$ git add .</span><br><span class="line">emoji:MyLib penn$ git commit -m "添加open代码"</span><br><span class="line">[master 8a97f0d] 添加open代码</span><br><span class="line"> 5 files changed, 72 insertions(+)</span><br><span class="line"> rewrite MyLib.xcodeproj/project.xcworkspace/xcuserdata/penn.xcuserdatad/UserInterfaceState.xcuserstate (90%)</span><br><span class="line"> create mode 100644 MyLib/Open/ReplaceMe.h</span><br><span class="line"> create mode 100644 MyLib/Open/ReplaceMe.m</span><br><span class="line"> create mode 100644 mylib.podspec</span><br><span class="line">emoji:MyLib penn$ git push</span><br><span class="line">Counting objects: 13, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (12/12), done.</span><br><span class="line">Writing objects: 100% (13/13), 7.44 KiB | 7.44 MiB/s, done.</span><br><span class="line">Total 13 (delta 4), reused 0 (delta 0)</span><br><span class="line">To 127.0.0.1:xxxxxx/mylib.git</span><br><span class="line">   20d4161..8a97f0d  master -&gt; master</span><br><span class="line">emoji:MyLib penn$ pod spec lint mylib.podspec</span><br><span class="line"></span><br><span class="line"><span class="meta"> -&gt;</span> mylib (0.0.1)</span><br><span class="line">    - WARN  | source: Git sources should specify a tag.</span><br><span class="line">    - WARN  | url: The URL (http://127.0.0.1/xxxxxx/mylib.git) is not reachable.</span><br><span class="line">    - NOTE  | xcodebuild:  note: Using new build system</span><br><span class="line">    - NOTE  | [iOS] xcodebuild:  note: Planning build</span><br><span class="line">    - NOTE  | [iOS] xcodebuild:  note: Constructing build description</span><br><span class="line">    - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file. (in target 'App')</span><br><span class="line"></span><br><span class="line">Analyzed 1 podspec.</span><br><span class="line"></span><br><span class="line">[!] The spec did not pass validation, due to 2 warnings (but you can use `--allow-warnings` to ignore them).</span><br><span class="line">emoji:MyLib penn$</span><br></pre></td></tr></table></figure></p>
<p>Podfile:添加引用<br><code>pod &#39;mylib&#39;, :git =&gt; &#39;http://127.0.0.1/xxxxxx/mylib.git&#39;</code></p>
<p>创建的PodProject项目引用新创建的mylib库，pod install成功<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">emoji:PodProject penn$ pod install</span><br><span class="line">Analyzing dependencies</span><br><span class="line">Fetching podspec for `PNText` from `/Users/penn/Desktop/LocalDep/PNText`</span><br><span class="line">Fetching podspec for `YYText` from `/Users/penn/Desktop/LocalDep/YYText`</span><br><span class="line">Pre-downloading: `mylib` from `http://127.0.0.1/xxxxxx/mylib.git`</span><br><span class="line">Downloading dependencies</span><br><span class="line">Using PNText (0.0.1)</span><br><span class="line">Using YYText (1.0.7)</span><br><span class="line">Installing mylib (0.0.1)</span><br><span class="line">Generating Pods project</span><br><span class="line">Integrating client project</span><br><span class="line">Sending stats</span><br><span class="line">Pod installation complete! There are 3 dependencies from the Podfile and 3 total pods installed.</span><br><span class="line">emoji:PodProject penn$</span><br></pre></td></tr></table></figure></p>
<p>上述步骤已经可以通过pod引用</p>
<h5 id="3-为MyLib添加标签"><a href="#3-为MyLib添加标签" class="headerlink" title="3. 为MyLib添加标签"></a>3. 为MyLib添加标签</h5><p>实际使用过程中并不会像上面那样使用，一般会添加tag，这样在使用过程中就可以指定特定的版本。添加标签并推送到服务器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">emoji:MyLib penn$ git tag 0.0.1</span><br><span class="line">emoji:MyLib penn$ git push --tags</span><br><span class="line">Counting objects: 8, done.</span><br><span class="line">Delta compression using up to 4 threads.</span><br><span class="line">Compressing objects: 100% (7/7), done.</span><br><span class="line">Writing objects: 100% (8/8), 1.84 KiB | 1.84 MiB/s, done.</span><br><span class="line">Total 8 (delta 4), reused 0 (delta 0)</span><br><span class="line">To 127.0.0.1:xxxxxx/mylib.git</span><br><span class="line"> * [new tag]         0.0.1 -&gt; 0.0.1</span><br></pre></td></tr></table></figure>
<h5 id="4-创建一个私有的Specs仓库"><a href="#4-创建一个私有的Specs仓库" class="headerlink" title="4. 创建一个私有的Specs仓库"></a>4. 创建一个私有的Specs仓库</h5><ul>
<li>在gitlab创建一个私有的空的仓库</li>
<li>添加私有Repo到Cocoapods<br><code>$ pod repo add REPO_NAME SOURCE_URL</code><br>可以看到/Users/penn/.cocoapods/repos目录下多了一个MyLib的Pod ，master是Cocoapods官网维护的Pod在本地的clone。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">emoji:repos penn$ pwd</span><br><span class="line">/Users/penn/.cocoapods/repos</span><br><span class="line">emoji:repos penn$ ls</span><br><span class="line">MySpeces		master</span><br></pre></td></tr></table></figure>
<h5 id="5-添加podspec到Repo"><a href="#5-添加podspec到Repo" class="headerlink" title="5. 添加podspec到Repo"></a>5. 添加podspec到Repo</h5><p>修改podspec文件，指定tag<br><code>s.source       = { :git =&gt; &quot;http://127.0.0.1/xxxxxx/mylib.git&quot;, :tag =&gt; &quot;0.0.1&quot; }</code></p>
<p><code>pod repo push REPO_NAME SPEC_NAME.podspec</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">emoji:MyLib penn$ pod repo push MySpeces mylib.podspec</span><br><span class="line"></span><br><span class="line">Validating spec</span><br><span class="line"><span class="meta"> -&gt;</span> mylib (0.0.1)</span><br><span class="line">    - WARN  | url: The URL (http://127.0.0.1/xxxxxx/mylib.git) is not reachable.</span><br><span class="line">    - NOTE  | xcodebuild:  note: Using new build system</span><br><span class="line">    - NOTE  | [iOS] xcodebuild:  note: Planning build</span><br><span class="line">    - NOTE  | [iOS] xcodebuild:  note: Constructing build description</span><br><span class="line">    - NOTE  | [iOS] xcodebuild:  warning: Skipping code signing because the target does not have an Info.plist file. (in target 'App')</span><br><span class="line"></span><br><span class="line">Updating the `MySpeces' repo</span><br><span class="line"></span><br><span class="line">Already up to date.</span><br><span class="line"></span><br><span class="line">Adding the spec to the `MySpeces' repo</span><br><span class="line"></span><br><span class="line"> - [Add] mylib (0.0.1)</span><br><span class="line"></span><br><span class="line">Pushing the `MySpeces' repo</span><br><span class="line"></span><br><span class="line">emoji:MyLib penn$</span><br></pre></td></tr></table></figure>
<p>结果在自己创建的Pod即MySpecs下多了一个自己要开源的二方项目<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">emoji:repos penn$ cd MySpeces/</span><br><span class="line">emoji:MySpeces penn$ ls</span><br><span class="line">README.md	mylib</span><br><span class="line">emoji:MySpeces penn$</span><br></pre></td></tr></table></figure></p>
<h5 id="6-修改Podfile"><a href="#6-修改Podfile" class="headerlink" title="6. 修改Podfile"></a>6. 修改Podfile</h5><ul>
<li>添加source</li>
<li>添加依赖</li>
</ul>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Uncomment the next line to define a global platform for your project</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#指定pods的搜索路径</span></span><br><span class="line">source <span class="string">'http://127.0.0.1/x'</span>x<span class="string">'x'</span>x/MySpecs.git<span class="string">'</span></span><br><span class="line"><span class="string">source '</span><span class="symbol">https:</span>/<span class="regexp">/github.com/</span>CocoaPods/Specs.git<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">platform :ios, '</span><span class="number">9.0</span><span class="string">'</span></span><br><span class="line"><span class="string">target '</span>PodProject<span class="string">' do</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">#引用开源pod,如果有私有source时,也需要添加公有开源source</span></span><br><span class="line"><span class="string">#pod '</span>AFNetworking<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#本地pod引用</span></span><br><span class="line"><span class="string">pod '</span>YYText<span class="string">', :path=&gt;'</span>/Users/penn/Desktop/LocalDep/YYText<span class="string">'</span></span><br><span class="line"><span class="string">pod '</span>PNText<span class="string">', :path=&gt;'</span>/Users/penn/Desktop/LocalDep/PNText<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#没有私有的Specs时,指定Git URL</span></span><br><span class="line"><span class="string">#pod '</span>mylib<span class="string">', :git =&gt; '</span><span class="symbol">http:</span>/<span class="regexp">/127.0.0.1/xxxxxx</span><span class="regexp">/mylib.git'</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">#创建Specs并添加source后,直接使用私有仓库</span></span><br><span class="line"><span class="regexp">pod 'mylib'</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">#####所有的pod都必须有NAME.podspec文件.#######</span></span><br><span class="line"><span class="regexp">end</span></span><br></pre></td></tr></table></figure>
<ul>
<li>cd到PodProject项目根目录，<code>pod install</code>.<br>可以看到我们新建的私有Cocoapods项目mylib已经可以通过pod使用</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">emoji:PodProject penn$ pod install</span><br><span class="line">Analyzing dependencies</span><br><span class="line">Fetching podspec for `PNText` from `/Users/penn/Desktop/LocalDep/PNText`</span><br><span class="line">Fetching podspec for `YYText` from `/Users/penn/Desktop/LocalDep/YYText`</span><br><span class="line">Cloning spec repo `0-xxxxxx-myspecs` from `http://127.0.0.1/xxxxx/MySpecs.git`</span><br><span class="line">Downloading dependencies</span><br><span class="line">Using PNText (0.0.1)</span><br><span class="line">Using YYText (1.0.7)</span><br><span class="line">Installing mylib 0.0.1</span><br><span class="line">Generating Pods project</span><br><span class="line">Integrating client project</span><br><span class="line">Sending stats</span><br><span class="line">Pod installation complete! There are 3 dependencies from the Podfile and 3 total pods installed.</span><br><span class="line">emoji:PodProject penn$</span><br></pre></td></tr></table></figure>
<h5 id="7-Over"><a href="#7-Over" class="headerlink" title="7. Over"></a>7. Over</h5>
      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>起风了，您的支持将鼓励我继续创作!</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/uploads/wechat.jpeg" alt="Pinn WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/uploads/alipay.jpeg" alt="Pinn Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Cocopods/" rel="tag"># Cocopods</a>
          
            <a href="/tags/Docker/" rel="tag"># Docker</a>
          
            <a href="/tags/GitLab/" rel="tag"># GitLab</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/10/22/Cocoapods创建私有库（一）/" rel="next" title="Cocoapods创建私有Specs(一)">
                <i class="fa fa-chevron-left"></i> Cocoapods创建私有Specs(一)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/10/26/macos+Docker+GitLab  构建本地Git服务/" rel="prev" title="macos+Docker+GitLab 构建本地Git服务">
                macos+Docker+GitLab 构建本地Git服务 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        
<script>
  with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='//bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];
</script>

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avator.gif"
                alt="Pinn" />
            
              <p class="site-author-name" itemprop="name">Pinn</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/aipinn" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Cocoapods创建私有Specs-二"><span class="nav-number">1.</span> <span class="nav-text">Cocoapods创建私有Specs(二)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#引用私有Spec（-git）"><span class="nav-number">1.1.</span> <span class="nav-text">引用私有Spec（:git）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-名词解析"><span class="nav-number">1.1.0.0.1.</span> <span class="nav-text">1. 名词解析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-创建一个支持cocoapods的pod-library项目"><span class="nav-number">1.1.0.0.2.</span> <span class="nav-text">2. 创建一个支持cocoapods的pod library项目</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-为MyLib添加标签"><span class="nav-number">1.1.0.0.3.</span> <span class="nav-text">3. 为MyLib添加标签</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-创建一个私有的Specs仓库"><span class="nav-number">1.1.0.0.4.</span> <span class="nav-text">4. 创建一个私有的Specs仓库</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-添加podspec到Repo"><span class="nav-number">1.1.0.0.5.</span> <span class="nav-text">5. 添加podspec到Repo</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-修改Podfile"><span class="nav-number">1.1.0.0.6.</span> <span class="nav-text">6. 修改Podfile</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-Over"><span class="nav-number">1.1.0.0.7.</span> <span class="nav-text">7. Over</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Pinn</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://pinn.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://aipinn.com/2018/10/23/Cocoapods创建私有库（二）/';
          this.page.identifier = '2018/10/23/Cocoapods创建私有库（二）/';
          this.page.title = 'Cocoapods创建私有Specs(一)';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://pinn.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  
  


  

  

</body>
</html>
